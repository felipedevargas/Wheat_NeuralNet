<div class="dead">
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line">function [y1] = neuralNet_MR(x1)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%MYNEURALNETWORKFUNCTION neural network simulation function.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">% Generated by Neural Network Toolbox function genFunction, 19-Feb-2017 22:00:34.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">% [y1] = myNeuralNetworkFunction(x1) takes these arguments:</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%   x = 10xQ matrix, input #1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">% and returns:</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">%   y = 1xQ matrix, output #1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="comment">% where Q is the number of samples.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"><span class="comment">%#ok&lt;*RPMT0&gt;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line"><span class="comment">% ===== NEURAL NETWORK CONSTANTS =====</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line"><span class="comment">% Input 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line">x1_step1.xoffset = [1;26.19;15.25;60.5;25.5;14.43;6;25.54;14.74;0];</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line">x1_step1.gain = [0.0512820512820513;0.704225352112676;0.816326530612245;0.00880281690140845;0.448430493273543;0.510204081632653;0.01318391562294;0.371747211895911;0.431034482758621;0.0157977883096367];</span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line">x1_step1.ymin = -1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line"><span class="comment">% Layer 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line">b1 = [2.3163110491431644355;-2.059744251345057009;-0.71554569352217933798;-0.10272177867478368696;0.45876597713442274218;-0.30304172312647881249;1.0576795247684114276;-1.2404167830979258014;1.5774931726376268948;-2.3427222277028243447];</span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line">IW1_1 = [-1.6155163611642040511 -0.19642573246183914204 0.093526999748374028965 1.3042679871776989842 -0.61273458234593203287 0.40796146241162323243 0.18297288808896358669 0.49642053046634704305 -0.45291080294124524963 -0.58571474009910362568;1.8640042499224640515 -0.74885617380101865415 0.16057989692364221801 0.15594471950967420115 -0.56796110557813472841 0.65801192674147690465 -0.36773110741137843283 0.63670811342496236307 -0.39403824783130203535 -0.82707533911442210339;-2.0027914418227807936 -0.12932216791647696552 0.21341477867189823092 -0.16429800462404631212 0.99312792197198018762 0.034143144051284823881 -0.23249370410427780409 -1.0056070196466246891 -1.2357881134088026798 0.96342825954484667683;1.0414120494331360334 -0.045787312832481649738 -0.82215828162090576203 -1.582185924745438621 0.74281477428244091499 -0.37756868587830422213 -1.0330839824192548093 0.25464557813094301775 0.3986143662818507627 -0.02010616876628312788;-0.083305770789786334762 0.080998707475034070757 -0.39400303085875248987 -0.67451371982691121776 0.78288370501732562623 -0.7171899895592969143 -0.61081085134700852102 0.18699154232229869832 -0.72551522473052942885 -0.19540573784336495722;-0.77759707706993275167 -0.032613254960254411952 1.8767371890567809967 1.197772714103320757 0.44041945677307003937 -0.040360463768368173842 0.7141982490134216599 0.15740558759276748746 -0.57003238955896917695 1.6573713337411264401;0.075176320249572964327 0.067638669336928386455 -1.4911821940960721111 0.52793280955871768612 -0.30950440530658229754 0.25503122581338166786 -0.29365259241080160502 0.31772248820009890702 0.63214047454607669163 0.22706238440264331357;-0.84663216614916991798 0.42682566541921657111 -0.65759069834700101254 -0.46465321746947146897 0.98844923625467795425 -0.96239483399944125708 0.61678560478197330674 1.3565293166318297402 0.8166082438180344294 -0.07968184046374199303;0.37953438287465768308 -0.063915395985086859154 1.3057432407730911184 -0.75882956830815573301 -0.32461006978044920634 0.37397167483911414321 -0.87664852122934910916 -0.59838540584552468715 -0.21697577057756078922 -0.82870049693877889663;-0.86540220890089802896 -0.49437325697748751852 -0.27013745246050452353 -0.35734210994415172014 0.3029786767483688692 0.39229679209850210064 -0.099478784169803546877 0.54840484437688008512 -0.524698172434426513 -0.32280217701845159706];</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line"><span class="comment">% Layer 2</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line">b2 = -1.0264491074102544133;</span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line">LW2_1 = [0.48693446864701528387 -0.36808468264431443151 -0.23434127877545510299 -0.30399536943019139779 0.26267477595416222069 -0.8395778988404707377 0.079144748541316561896 0.10470887567251789541 -0.30340120239491275012 -0.43332051374234686891];</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line"><span class="comment">% Output 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line">y1_step1.ymin = -1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line">y1_step1.gain = 0.00488997555012225;</span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line">y1_step1.xoffset = 76;</span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33">33</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34">34</a></span><span class="line"><span class="comment">% ===== SIMULATION ========</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35">35</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36">36</a></span><span class="line"><span class="comment">% Dimensions</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37">37</a></span><span class="line">Q = size(x1,2); <span class="comment">% samples</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38">38</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39">39</a></span><span class="line"><span class="comment">% Input 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40">40</a></span><span class="line">xp1 = mapminmax_apply(x1,x1_step1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41">41</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42">42</a></span><span class="line"><span class="comment">% Layer 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,43" id="srcline43">43</a></span><span class="line">a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,44" id="srcline44">44</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,45" id="srcline45">45</a></span><span class="line"><span class="comment">% Layer 2</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,46" id="srcline46">46</a></span><span class="line">a2 = repmat(b2,1,Q) + LW2_1*a1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,47" id="srcline47">47</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,48" id="srcline48">48</a></span><span class="line"><span class="comment">% Output 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,49" id="srcline49">49</a></span><span class="line">y1 = mapminmax_reverse(a2,y1_step1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50">50</a></span><span class="line">end</span></span>
</pre>
</div>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51">51</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52">52</a></span><span class="line"><span class="comment">% ===== MODULE FUNCTIONS ========</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53">53</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54">54</a></span><span class="line"><span class="comment">% Map Minimum and Maximum Input Processing Function</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55">55</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S20T2U359">y</span> = mapminmax_apply(<span class="var type1" id="S21T2U362">x</span>,<span class="var type1" id="S22T3U363">settings</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56">56</a></span><span class="line"><span class="mxinfo " id="T2:U4"><span class="var type1" id="S20T2U366">y</span> = <span class="mxinfo " id="T2:U6">bsxfun(@minus,<span class="var type1" id="S21T2U371">x</span>,<span class="mxinfo " id="T2:U8"><span class="var type1" id="S22T3U373">settings</span>.xoffset</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57">57</a></span><span class="line"><span class="mxinfo " id="T2:U10"><span class="var type1" id="S20T2U377">y</span> = <span class="mxinfo " id="T2:U12">bsxfun(@times,<span class="var type1" id="S20T2U382">y</span>,<span class="mxinfo " id="T2:U14"><span class="var type1" id="S22T3U384">settings</span>.gain</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58">58</a></span><span class="line"><span class="mxinfo " id="T2:U16"><span class="var type1" id="S20T2U388">y</span> = <span class="mxinfo " id="T2:U18">bsxfun(@plus,<span class="var type1" id="S20T2U393">y</span>,<span class="mxinfo " id="T1:U20"><span class="var type1" id="S22T3U395">settings</span>.ymin</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59">59</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60">60</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61">61</a></span><span class="line"><span class="comment">% Sigmoid Symmetric Transfer Function</span></span></span>
</pre>
<div class="dead">
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62">62</a></span><span class="line">function a = tansig_apply(n,~)</span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63">63</a></span><span class="line">a = 2 ./ (1 + exp(-2*n)) - 1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64">64</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65">65</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66">66</a></span><span class="line"><span class="comment">% Map Minimum and Maximum Output Reverse-Processing Function</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67">67</a></span><span class="line">function x = mapminmax_reverse(y,settings)</span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68">68</a></span><span class="line">x = bsxfun(@minus,y,settings.ymin);</span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69">69</a></span><span class="line">x = bsxfun(@rdivide,x,settings.gain);</span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70">70</a></span><span class="line">x = bsxfun(@plus,x,settings.xoffset);</span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71">71</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72">72</a></span><span class="line"> </span></span>
</pre>
</div>
