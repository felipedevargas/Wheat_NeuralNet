<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">y1</span>] = neuralNet_MS(<span class="var type1" id="S3T2U6">x1</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%MYNEURALNETWORKFUNCTION neural network simulation function.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">% Generated by Neural Network Toolbox function genFunction, 19-Feb-2017 22:01:21.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">% [y1] = myNeuralNetworkFunction(x1) takes these arguments:</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%   x = 10xQ matrix, input #1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">% and returns:</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">%   y = 1xQ matrix, output #1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="comment">% where Q is the number of samples.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"><span class="comment">%#ok&lt;*RPMT0&gt;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line"><span class="comment">% ===== NEURAL NETWORK CONSTANTS =====</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line"><span class="comment">% Input 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line"><span class="mxinfo " id="T2:U3"><span class="mxinfo " id="T2:U4"><span class="var type1" id="S4T3U10">x1_step1</span>.xoffset</span> = <span class="mxinfo " id="T2:U6">[1;26.19;15.25;60.5;25.5;14.43;6;25.54;14.74;0]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo " id="T2:U7"><span class="mxinfo " id="T2:U8"><span class="var type1" id="S4T3U36">x1_step1</span>.gain</span> = <span class="mxinfo " id="T2:U10">[0.0512820512820513;0.704225352112676;0.816326530612245;0.00880281690140845;0.448430493273543;0.510204081632653;0.01318391562294;0.371747211895911;0.431034482758621;0.0157977883096367]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line"><span class="mxinfo " id="T1:U11"><span class="mxinfo " id="T1:U12"><span class="var type1" id="S4T3U62">x1_step1</span>.ymin</span> = <span class="mxinfo " id="T1:U14">-1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line"><span class="comment">% Layer 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo " id="T2:U15"><span class="var type1" id="S5T2U68">b1</span> = <span class="mxinfo " id="T2:U17">[-2.1041232931636471015;-1.5422292851820125215;0.94376981135683435387;0.9485717512542262142;-1.3297514645184405069;0.19381753759035949547;0.84835460021199260439;1.4483462751627491638;-2.0952051833664926406;1.867284536199366185]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line"><span class="mxinfo " id="T4:U18"><span class="var type1" id="S6T4U96">IW1_1</span> = <span class="mxinfo " id="T4:U20">[0.19184638118183300337 -0.353273359999140113 0.70270624712098561648 0.74314250219808941633 1.0142949556879776729 -0.70280360396276875257 1.032090781959136061 0.41047734432410809546 -0.28309608269126695923 -0.0039410533235942468017;-0.084448074388327160067 0.51042601991198166544 -1.1617901633938614303 -0.81190370890756202726 -0.71438203187448567899 0.063569415364871664775 1.0949972419512408184 0.082590397351763322753 0.26711342719805830637 0.11002351598916501607;-0.44981335559709101357 -0.065565640063911564961 -0.18676241674179092089 -0.95787744550831266377 0.6088625733487800229 -0.78053310328614033953 -0.10940639555415880568 0.37205669985314943071 -0.48222536132911786311 -1.1288592030017423617;-0.84535357379007791678 0.41810409900862421928 0.37914681411811174128 1.1891308549755070789 -1.1078387177798776353 0.33207038229718105482 -0.33850241822578464035 0.2800740195448184755 -0.45603728666939230552 0.93931872014937045634;-3.1333191565961810987 2.1160479628448602973 -0.12365132669815470656 -0.23265004220712467986 -1.0612283247359510785 0.97273549065783448953 1.4811320791036841626 1.1497150326246559082 0.95375905170876951189 0.27146837035967530394;-2.4739757964845616733 -0.65593902090936861971 -0.91125147587201693611 -0.62035387858109358739 1.2784202230332937233 0.59373303636935159666 0.52531630740622892173 -1.0657048857900366379 -0.13841898057159365831 -0.40574214046036433112;0.21080000448323568674 0.51833578318267059526 -0.082936693501539981987 -0.81929892228083145422 0.16800212194730856918 -0.2073746822089618802 -0.78692590769991321853 -0.64248863474665540707 -0.22692353372837173464 -1.0101082047152816212;0.48664186164881251262 0.7077968947872386174 0.26131659436673215779 0.65507899929460056132 0.35649794181014432537 -0.084409671937353561444 -0.9939928029528334319 0.035095972646306289322 0.41049548969876087368 -0.24511439731682230225;0.53718937939760158518 0.0069218186287924379774 -0.18631354015861706364 -0.35425140473321320433 -0.39544705548403902284 -1.1237370573281069142 0.53511291175677400123 0.35242526661567225021 -0.33632660181233420271 -0.73820796481686090651;1.1139245940287834102 -0.5575120333305354503 1.4318390955037387791 0.013932856570689610559 0.46477365997187602975 0.016784480800458786987 -1.2169182184242484102 -0.081371820385235077433 0.49405770758437239643 -0.46766650505981788299]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line"><span class="comment">% Layer 2</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line"><span class="mxinfo " id="T1:U21"><span class="var type1" id="S7T1U261">b2</span> = <span class="mxinfo " id="T1:U23">0.0441758226954580141</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line"><span class="mxinfo " id="T5:U24"><span class="var type1" id="S8T5U265">LW2_1</span> = <span class="mxinfo " id="T5:U26">[-0.38815836173231199613 -0.51967195491876505553 -0.16644836315309699537 -0.43806224833602586122 0.37634335066908364276 0.51314935253669546888 -0.17652782439013298132 -0.15794142018829954166 0.40982002977658632537 -0.084968767414960066908]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line"><span class="comment">% Output 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line"><span class="mxinfo " id="T1:U27"><span class="mxinfo " id="T1:U28"><span class="var type1" id="S9T6U288">y1_step1</span>.ymin</span> = <span class="mxinfo " id="T1:U30">-1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line"><span class="mxinfo " id="T1:U31"><span class="mxinfo " id="T1:U32"><span class="var type1" id="S9T6U295">y1_step1</span>.gain</span> = <span class="mxinfo " id="T1:U34">0.00405679513184584</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line"><span class="mxinfo " id="T1:U35"><span class="mxinfo " id="T1:U36"><span class="var type1" id="S9T6U301">y1_step1</span>.xoffset</span> = <span class="mxinfo " id="T1:U38">62</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33">33</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34">34</a></span><span class="line"><span class="comment">% ===== SIMULATION ========</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35">35</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36">36</a></span><span class="line"><span class="comment">% Dimensions</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37">37</a></span><span class="line"><span class="mxinfo " id="T1:U39"><span class="var type1" id="S10T1U306">Q</span> = <span class="mxinfo " id="T1:U41">size(<span class="var type1" id="S3T2U309">x1</span>,2)</span></span>; <span class="comment">% samples</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38">38</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39">39</a></span><span class="line"><span class="comment">% Input 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40">40</a></span><span class="line"><span class="mxinfo " id="T2:U43"><span class="var type1" id="S12T2U313">xp1</span> = <span class="mxinfo " id="T2:U45"><span class="fcn" id="F66N4:B315">mapminmax_apply</span>(<span class="var type1" id="S3T2U316">x1</span>,<span class="var type1" id="S4T3U317">x1_step1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41">41</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42">42</a></span><span class="line"><span class="comment">% Layer 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,43" id="srcline43">43</a></span><span class="line"><span class="mxinfo " id="T2:U48"><span class="var type1" id="S14T2U320">a1</span> = <span class="mxinfo " id="T2:U50"><span class="fcn" id="F99N6:B322">tansig_apply</span>(<span class="mxinfo " id="T2:U51"><span class="mxinfo " id="T2:U52">repmat(<span class="var type1" id="S5T2U326">b1</span>,1,<span class="var type1" id="S10T1U328">Q</span>)</span> + <span class="mxinfo " id="T2:U55"><span class="var type1" id="S6T4U330">IW1_1</span>*<span class="var type1" id="S12T2U331">xp1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,44" id="srcline44">44</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,45" id="srcline45">45</a></span><span class="line"><span class="comment">% Layer 2</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,46" id="srcline46">46</a></span><span class="line"><span class="mxinfo " id="T1:U58"><span class="var type1" id="S17T1U334">a2</span> = <span class="mxinfo " id="T1:U60"><span class="mxinfo " id="T1:U61">repmat(<span class="var type1" id="S7T1U338">b2</span>,1,<span class="var type1" id="S10T1U340">Q</span>)</span> + <span class="mxinfo " id="T1:U64"><span class="var type1" id="S8T5U342">LW2_1</span>*<span class="var type1" id="S14T2U343">a1</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,47" id="srcline47">47</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,48" id="srcline48">48</a></span><span class="line"><span class="comment">% Output 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,49" id="srcline49">49</a></span><span class="line"><span class="mxinfo " id="T1:U67"><span class="var type1" id="S2T1U346">y1</span> = <span class="mxinfo " id="T1:U69"><span class="fcn" id="F143N5:B348">mapminmax_reverse</span>(<span class="var type1" id="S17T1U349">a2</span>,<span class="var type1" id="S9T6U350">y1_step1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50">50</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51">51</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52">52</a></span><span class="line"><span class="comment">% ===== MODULE FUNCTIONS ========</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53">53</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54">54</a></span><span class="line"><span class="comment">% Map Minimum and Maximum Input Processing Function</span></span></span>
</pre>
<div class="dead">
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55">55</a></span><span class="line">function y = mapminmax_apply(x,settings)</span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56">56</a></span><span class="line">y = bsxfun(@minus,x,settings.xoffset);</span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57">57</a></span><span class="line">y = bsxfun(@times,y,settings.gain);</span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58">58</a></span><span class="line">y = bsxfun(@plus,y,settings.ymin);</span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59">59</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60">60</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61">61</a></span><span class="line"><span class="comment">% Sigmoid Symmetric Transfer Function</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62">62</a></span><span class="line">function a = tansig_apply(n,~)</span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63">63</a></span><span class="line">a = 2 ./ (1 + exp(-2*n)) - 1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64">64</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65">65</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66">66</a></span><span class="line"><span class="comment">% Map Minimum and Maximum Output Reverse-Processing Function</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67">67</a></span><span class="line">function x = mapminmax_reverse(y,settings)</span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68">68</a></span><span class="line">x = bsxfun(@minus,y,settings.ymin);</span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69">69</a></span><span class="line">x = bsxfun(@rdivide,x,settings.gain);</span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70">70</a></span><span class="line">x = bsxfun(@plus,x,settings.xoffset);</span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71">71</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72">72</a></span><span class="line"> </span></span>
</pre>
</div>
